generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Item {
  id      String       @id @default(uuid())
  name    String       @unique
  sources ItemSource[]
  usedIn  Ingredient[]
}

model ItemSource {
  id          String       @id @default(uuid())
  item        Item         @relation(fields: [itemId], references: [id])
  itemId      String
  type        SourceType
  time        Float
  ingredients Ingredient[]
}

model Ingredient {
  id       String     @id @default(uuid())
  source   ItemSource @relation(fields: [sourceId], references: [id], onDelete: Cascade)
  sourceId String
  item     Item       @relation(fields: [itemId], references: [id])
  itemId   String
  quantity Int
}

enum SourceType {
  Gathered
  Processed
}
