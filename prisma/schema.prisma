generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Item {
  id               String                @id @default(uuid())
  name             String                @unique
  requirements     Requirement[]
  gatheredSources  GatheredItemSource[]
  processedSources ProcessedItemSource[]

  createdAt        DateTime              @default(now())
  updatedAt        DateTime              @updatedAt
}

model Requirement {
  id                String              @id @default(uuid())
  processedSourceId String
  requiredItemId    String
  quantity          Int
  processedSource   ProcessedItemSource @relation(fields: [processedSourceId], references: [id])
  requiredItem      Item                @relation(fields: [requiredItemId], references: [id])
}

model GatheredItemSource {
  id     String @id @default(uuid())
  itemId String
  item   Item   @relation(fields: [itemId], references: [id])

  @@map("gathered_item_sources")
}

model ProcessedItemSource {
  id           String        @id @default(uuid())
  itemId       String
  type         String
  time         Int
  requirements Requirement[]
  item         Item          @relation(fields: [itemId], references: [id])

  @@map("processed_item_sources")
}
